<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Detail Proyek</title>

  <!-- CSS GLOBAL -->
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="detail.css">

</head>

<body data-theme="dark">

  <!-- ============ NAVBAR ============ -->
  <header>
    <nav class="navbar">
      <h1 class="logo">Miftah Art<span>Creative</span></h1>

      <div class="burger" onclick="toggleMenu()">
        <span></span><span></span><span></span>
      </div>

      <ul class="nav-links">
        <li><a href="../index.html">Beranda</a></li>
        <li><a href="../index.html#about">Tentang</a></li>
        <li><a href="../project.html">Proyek</a></li>
        <li><a href="../index.html#contact">Hubungi</a></li>
      </ul>

      <div class="controls">
        <button onclick="setLang('id')">ğŸ‡®ğŸ‡©</button>
        <button onclick="setLang('en')">ğŸ‡¬ğŸ‡§</button>
        <button onclick="toggleMode()">ğŸŒ™/â˜€ï¸</button>
      </div>
    </nav>
  </header>

  <!-- ============ GALERI FOTO ============ -->
  <section class="project-gallery" id="gallery">
    <!-- FOTO DEFAULT (boleh hapus) -->
    <img src="../ultah bapak.png">
    <img src="../ultah bapak.png">
    <img src="../ultah bapak.png">
    <img src="../ultah bapak.png">
    <img src="../ultah bapak.png">
    <img src="../ultah bapak.png">
  </section>

  <!-- Tombol tambah foto -->
  <button class="add-btn" onclick="document.getElementById('uploadInput').click()">ï¼‹</button>
<input type="file" id="uploadInput" accept="image/*" style="display:none" onchange="uploadToCloudinary(event)">

  <!-- ============ FOOTER ============ -->
  <footer>
    <div class="socials">
      <p>Temukan saya di</p>
      <div class="icons">
        <a href="#">f</a>
        <a href="#">â§‰</a>
        <a href="#">âŒ•</a>
        <a href="#">in</a>
      </div>
    </div>
    <p>Â© 2025 Muhd. Nabil â€“ All Rights Reserved</p>
  </footer>


<!-- ====================================================== -->
<!-- ============== FIREBASE + CLOUDINARY JS ============== -->
<!-- ====================================================== -->

<!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js"></script>

<!-- Firebase v8 (compatible with your code) -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBeCvaqOiqVJsTW3EH2iUGYvAwub_VtI9M",
  authDomain: "portfolio-nabil.firebaseapp.com",
  databaseURL: "https://portfolio-nabil-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "portfolio-nabil",
  storageBucket: "portfolio-nabil.firebasestorage.app",
  messagingSenderId: "541632788938",
  appId: "1:541632788938:web:5fab9f0f28043b4296f733",
  measurementId: "G-YKQZCD5J3S"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* CLOUDINARY */
const cloudName = "dvgfdtbyf";
const uploadPreset = "portofolio_nabil";

/* UPLOAD CLOUDINARY */
function uploadToCloudinary(event) {
    const file = event.target.files[0];
    if (!file) return;

    let data = new FormData();
    data.append("file", file);
    data.append("upload_preset", uploadPreset);

    fetch(`https://api.cloudinary.com/v1_1/${cloudName}/image/upload`, {
        method: "POST",
        body: data
    })
    .then(res => res.json())
    .then(result => {
        saveImageToFirebase(result.secure_url);
    });
}

/* SAVE URL TO FIREBASE */
function saveImageToFirebase(url) {
  db.ref("project_gallery").push({
    image: url,
    time: Date.now()
  });
}

/* LOAD GALLERY */
function loadGallery() {
  const gallery = document.getElementById("gallery");

  db.ref("project_gallery").on("value", snapshot => {
    gallery.innerHTML = "";

    snapshot.forEach(child => {
      const data = child.val();
      const img = document.createElement("img");
      img.src = data.image;
      gallery.appendChild(img);
    });
  });
}

loadGallery();
</script>


</body>
</html>
